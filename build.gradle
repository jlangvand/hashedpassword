plugins {
  id 'maven'
  id 'maven-publish'
  id 'java-library'
}

apply plugin: 'java'
apply plugin: 'maven'

group = 'no.iskra'
version = '2.0.2'

sourceCompatibility = 1.11
targetCompatibility = 1.11

repositories {
   jcenter()
}

dependencies {
   compile 'org.slf4j:slf4j-api:1.7.25'
   testCompile 'junit:junit:4.12'
}

jar {
 manifest {
   attributes(
     'Class-Path': configurations.compile.collect { it.getName() }.join(' '),
     'Implementation-Title': project.name,
     'Implementation-Version': project.version
   )
 }
 from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

task sourcesJar(type: Jar, dependsOn: classes) {
   classifier = 'sources'
   from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
   classifier = 'javadoc'
   from javadoc.destinationDir
}

artifacts {
   archives sourcesJar
   archives javadocJar
}

// To specify a license in the pom:
install {
 repositories.mavenInstaller {
   pom.project {
     licenses {
       license {
         name 'GNU General Public License, Version 3'
         url 'http://www.gnu.org/licenses/'
         distribution 'repo'
       }
     }
   }
 }
}
